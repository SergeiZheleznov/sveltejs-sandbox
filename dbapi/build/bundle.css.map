{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "App.svelte",
    "ApiStatus.svelte",
    "Clock.svelte",
    "Station.svelte",
    "TableHeader.svelte",
    "TrainRoute.svelte",
    "TrainOnRoute.svelte",
    "StationSelect.svelte",
    "Timetable.svelte"
  ],
  "sourcesContent": [
    "<script lang=\"ts\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { onMount, setContext } from 'svelte';\nimport ApolloClient from 'apollo-boost';\n;\nimport { DeutscheBahnApiService } from './services/DeutscheBahnApiService';\nimport StationSelect from './containers/StationSelect/StationSelect.svelte';\nimport TableHeader from './components/TableHeader/TableHeader.svelte';\nimport Timetable from './containers/Timetable/Timetable.svelte';\nimport { activeComponent, componentsAvailable } from './stores/active-component-store';\nimport currentStation from './stores/station-store';\nimport { TimetableService } from './services';\nexport let configurationService;\nlet status = \"loading\";\nlet searchString;\nconst onFormSubmit = () => {\n    $activeComponent = componentsAvailable.SelectStation;\n};\nlet dbApiService;\nlet dbTimetableService;\nonMount(() => __awaiter(void 0, void 0, void 0, function* () {\n    const token = yield configurationService.getBearer();\n    const client = new ApolloClient({\n        headers: {\n            authorization: `Bearer ${token}`\n        },\n        uri: configurationService.getGraphQLEndpoint()\n    });\n    dbApiService = new DeutscheBahnApiService(client);\n    dbTimetableService = new TimetableService(configurationService.getTimetableApiUrl(), token);\n    status = \"loaded\";\n}));\n</script>\n\n<div class=\"container\">\n\t<div class=\"location-search-form\">\n\t\t<form on:submit|preventDefault={onFormSubmit}>\n\t\t\t<input placeholder=\"Find location\" class=\"station-input\" bind:value={searchString} />\n\t\t</form>\n\t</div>\n\t<div class=\"main\">\n\t\t{#if status === \"loading\"}\n\t\t\t<div>\n\t\t\t\tConnecting to DB API ...\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<TableHeader dbApiService={dbApiService} />\n\t\t\t{#if $activeComponent === componentsAvailable.SelectStation}\n\t\t\t\t<StationSelect dbApiService={dbApiService} searchString={searchString} />\n\t\t\t{:else if $activeComponent === componentsAvailable.Timetable}\n\t\t\t\t<Timetable dbTimetableService={dbTimetableService} station={$currentStation} />\n\t\t\t{/if}\n\t\t{/if}\n\t</div>\n</div>\n\n<style>\n\t.container {\n\t\twidth:60%;\n\t\tmargin: 10% auto 0;\n\t}\n\n\t.location-search-form {\n\t\tmargin-bottom: 3rem;\n\t}\n\n\t.main {\n\t\tpadding: 2rem;\n\t\tborder: 4px solid #ccc;\n    background-color: #222;\n    color: white;\n    -webkit-box-shadow: 0px -1px 70px -1px rgba(0,0,0,0.27);\n    -moz-box-shadow: 0px -1px 70px -1px rgba(0,0,0,0.27);\n    box-shadow: 0px -1px 70px -1px rgba(0,0,0,0.27);\n\t}\n\t.station-input {\n\t\tborder: 1px solid #ccc;\n\t\tcolor: #444;\n\t\tpadding: 10px;\n\t\twidth: 100%;\n\t\tmargin: 0;\n\t\tbackground-color: white;\n\t\toutline: transparent;\n\t\tbox-sizing: border-box;\n\t\tfont-size: 2rem;\n\t}\n\t.station-input::placeholder {\n\t\tcolor: #ccc;\n\t}\n\n\t:global(body) {\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-size: cover;\n\t\tbackground-attachment: fixed;\n\t}\n\n\t\t\n</style>",
    "<script lang=\"ts\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { onMount } from 'svelte';\n;\nexport let dbApiService;\nlet isServiceAvailable;\nonMount(() => __awaiter(void 0, void 0, void 0, function* () {\n    isServiceAvailable = yield dbApiService.checkApiAvailabillity();\n}));\nconst onClickHandler = (e) => __awaiter(void 0, void 0, void 0, function* () {\n    isServiceAvailable = yield dbApiService.checkApiAvailabillity();\n});\n</script>\n\n<div>\n  <button class:available={isServiceAvailable} on:click={onClickHandler}></button>\n</div>\n\n<style>\n  button {\n    background-color: red;\n    border: none;\n    outline: none;\n    border-radius: 100%;\n    display: block;\n    height: 20px;\n    width: 20px;\n  }\n  button.available {\n    background-color: green;\n  }\n</style>",
    "<script lang=\"ts\">import dateFormat from 'dateformat';\nlet time = new Date;\nlet tick = true;\nsetInterval(() => {\n    time = new Date;\n    tick = !tick;\n}, 1000);\n</script>\n\n<span>{dateFormat(time, `HH`)}{@html tick ? ':' : '&nbsp;'}{dateFormat(time, `MM`)}</span>\n\n<style>\n  span {\n    font-size: 1.8rem;\n  }\n</style>",
    "<script lang=\"ts\">;\nimport { createEventDispatcher } from 'svelte';\n;\nexport let station;\nexport let active = true;\nconst dispatch = createEventDispatcher();\nconst onClickHandler = () => {\n    dispatch('stationselect', station);\n};\n</script>\n\n<div class=\"item\">\n  <div class=\"wrapper\" class:active=\"{active}\">\n    <!-- <div class=\"image\">\n      <img src=\"{station.picture.url}\" alt=\"{station.name}\" />\n    </div> -->\n    <div class=\"meta\">\n      <span>{station.name}</span>\n      <div class=\"actions\">\n        <button on:click=\"{onClickHandler}\">\n          ArrivalBoard\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<style>\n  .item {\n    padding: .2rem;\n    margin-bottom: .2rem;\n    border: 1px solid #444;\n  }\n  .wrapper {\n    display: inline-flex;\n    flex-wrap: wrap;\n    gap: 6px;\n  }\n\n  .active {\n    background: #444;\n    color: white;\n  }\n\n  .meta {\n    flex-grow: 1;\n  }\n\n  .image {\n    flex-grow: 0;\n  }\n  .image img {\n    max-height: 96px;\n  }\n\n  .actions {\n    margin-top: 6px;\n    display: flex;\n  }\n</style>",
    "<script lang=\"ts\">import Clock from '../../components/Clock/Clock.svelte';\nimport ApiStatus from '../../components/ApiStatus/ApiStatus.svelte';\nimport location from '../../stores/station-store';\n;\nexport let dbApiService;\n</script>\n<div class=\"header\">\n  <div class=\"main-col\">\n    {$location ? $location.name : '...'}\n  </div>\n  <div class=\"secondary-col\">\n    <Clock />\n    <ApiStatus dbApiService={dbApiService} />\n  </div>\n</div>\n\n<style>\n  .header {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tmargin-bottom: 1rem;\n\t}\n\t.main-col {\n\t\tflex-grow: 1;\n\t\tfont-size: 2rem;\n\t}\n\t.secondary-col {\n\t\tflex-grow: 0;\n\t\tdisplay: inline-flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 12px;\n\t\talign-items: center;\n\t}\n</style>",
    "<script lang=\"ts\">var _a, _b;\n;\nimport dateFormat from 'dateformat';\nexport let station;\nexport let train;\nconst origin = (_a = train === null || train === void 0 ? void 0 : train.arrival) === null || _a === void 0 ? void 0 : _a.stations[0];\nconst destination = (_b = train === null || train === void 0 ? void 0 : train.departure) === null || _b === void 0 ? void 0 : _b.stations.slice(-1).pop();\n</script>\n\n<div class=\"wrapper\">\n  {#if origin}\n    <div class=\"origin\"><span>{@html origin}</span> &ctdot;</div>\n  {/if}\n  <div class=\"current\">\n    <div class=\"flex\">\n      {#if train?.arrival?.time}\n        <div class=\"time\">{dateFormat(train.arrival.time, 'HH:MM')} &rtrif;&nbsp;</div>\n      {/if}\n      <div>\n        {@html station.name}\n      </div>\n      {#if train?.departure?.time}\n        <div class=\"time\">&nbsp;&rtrif; {dateFormat(train.departure.time, 'HH:MM')}</div>\n      {/if}\n    </div>\n  </div>\n  {#if destination}\n    <div class=\"destination\">&ctdot; <span>{@html destination}</span></div>\n  {/if}\n</div>\n\n<style>\n  .wrapper {\n    border: 1px solid lightgray;\n    padding: .1rem;\n  }\n  .wrapper>div {\n    display: inline-block;\n    padding: .3rem;\n  }\n  .wrapper .current {\n    background-color: white;\n    color:blue;\n    display: inline-block;\n    justify-items: stretch;\n    gap: 0.3rem;\n  }\n\n  .flex {\n    display: flex;\n  }\n  .time {\n    color: black;\n  }\n\n</style>",
    "<script lang=\"ts\">;\nimport dateFormat from 'dateformat';\nimport { fade } from 'svelte/transition';\nimport TrainRoute from \"../TimeTable/TrainRoute/TrainRoute.svelte\";\nexport let train;\nexport let station;\n</script>\n\n<div transition:fade class=\"wrapper\">\n  <div class=\"item\">\n    <div class=\"col-1_3\">\n      <div class=\"name\">{train.type}</div>\n      <div class=\"origin\">\n        <!-- {@html train.departure.stations[0]} -->\n      </div>\n    </div>\n    <div class=\"col-1_3 track\">\n      <!-- {train.arrival.platform} -->\n    </div>\n    <div class=\"col-1_3 time\">\n      <!-- {dateFormat(train.arrival.time, 'HH:MM')} -->\n    </div>\n  </div>\n  <TrainRoute station={station} train={train} />\n</div>\n\n<style>\n  .col-1_3 {\n    width: 33.33%;\n  }\n  .wrapper {\n    padding: 1rem;\n    margin-bottom: 0.2rem;\n    background-color: darkblue;\n    color: white;\n  }\n  .item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  .name {\n    font-size: 2rem;\n  }\n  .origin {\n    font-size: 0.8rem;\n  }\n  .track {\n    font-size: larger;\n    text-align: center;\n  }\n  .time {\n    font-size: 1.4rem;\n    text-align: right;\n  }\n</style>",
    "<script lang=\"ts\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n;\nimport { onMount } from 'svelte';\nimport currentStation from '../../stores/station-store';\nimport Station from \"../../components/Station/Station.svelte\";\nimport { activeComponent, componentsAvailable } from '../../stores/active-component-store';\nexport let searchString;\nexport let dbApiService;\nlet stations = [];\nonMount(() => __awaiter(void 0, void 0, void 0, function* () {\n    stations = yield dbApiService.getStationsByName(searchString);\n}));\nconst onItemSelect = (el) => {\n    const station = el.detail;\n    console.log('station.picture.url', station.picture.url);\n    document.querySelector('body').style.backgroundImage = station.picture.url ? `url(${station.picture.url})` : '';\n    currentStation.setStation(Object.assign({}, station));\n    $activeComponent = componentsAvailable.Timetable;\n};\n$: {\n    (() => __awaiter(void 0, void 0, void 0, function* () {\n        stations = yield dbApiService.getStationsByName(searchString);\n    }));\n}\n</script>\n\n<section>\n  {#each stations as station}\n    <Station active={false} on:stationselect=\"{onItemSelect}\" station={station} />{@html ' '}\n  {/each}\n</section>\n\n<style>\n  section {\n    padding: .3rem 0;\n  }\n</style>",
    "<script lang=\"ts\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n;\nimport { getContext, onMount } from 'svelte';\nimport TrainOnRoute from \"../../components/TrainOnRoute/TrainOnRoute.svelte\";\nexport let station;\nexport let dbTimetableService;\nlet time = new Date();\nlet status = \"loading\";\nlet errorMessage = null;\nlet trainsOnRoute;\nonMount(() => __awaiter(void 0, void 0, void 0, function* () {\n    const response = yield dbTimetableService.getTrainsOnRoute(station.primaryEvaId.toString());\n    trainsOnRoute = [...response.sort((a, b) => {\n            var _a, _b;\n            let result = 0;\n            if (!((_a = a === null || a === void 0 ? void 0 : a.arrival) === null || _a === void 0 ? void 0 : _a.time)) {\n                result = 1;\n            }\n            else if (!((_b = b === null || b === void 0 ? void 0 : b.arrival) === null || _b === void 0 ? void 0 : _b.time)) {\n                result = -1;\n            }\n            else if (a.arrival.time && b.arrival.time) {\n                result = a.arrival.time > b.arrival.time ? 1 : -1;\n            }\n            return result;\n        })];\n    console.log('trainsOnRoute', trainsOnRoute);\n    status = \"loaded\";\n}));\n</script>\n\n<svelte:head>\n  <title>Board: {station && station.name ? station.name : '..'}</title>\n</svelte:head>\n\n<section>\n  {#if status == \"loaded\"}\n    {#if trainsOnRoute && trainsOnRoute.length}\n      {#each trainsOnRoute as train}\n        <TrainOnRoute station={station} train={train} />\n      {/each}\n    {:else}\n      <div>No trains found</div>\n    {/if}\n  {:else if status == \"loading\"}\n    <div class=\"message\">\n      loading...\n    </div>\n  {/if}\n</section>\n\n<style>\n  section {\n    border: 2px solid #333;\n  }\n  .message {\n    padding: 1rem;\n  }\n</style>"
  ],
  "names": [],
  "mappings": "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"
}